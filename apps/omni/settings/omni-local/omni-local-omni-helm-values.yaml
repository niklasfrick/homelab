domainName: omni.apps-omni.949x.net
accountUuid: 8b965a24-0dce-4481-840f-b5548ea1c139
name: "Omni"
auth:
  auth0:
    enabled: false
  oidc:
    enabled: true
    url: https://github.com
    existingSecret:
      enabled: true
      name: github-oauth-creds
      clientIdKey: "clientID"
      clientSecretKey: "clientSecret"
service:
  ingress:
    enabled: true
    ingressClassName: internal-ingress-nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
  siderolink:
    domainName: siderolink.omni.apps-omni.949x.net
    ingress:
      enabled: true
      ingressClassName: internal-ingress-nginx
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-prod
  k8sProxy:
    domainName: kubernetes.omni.apps-omni.949x.net
    ingress:
      enabled: true
      ingressClassName: internal-ingress-nginx
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-prod

persistence:
  enabled: true
  persistentVolumeClaim:
    storageClass: "local-path"
    size: 30Gi

volumes:
  gpg:
    secretName: etcd-gpg-asc-key

extraObjects:
  - |
    apiVersion: external-secrets.io/v1
    kind: ExternalSecret
    metadata:
      name: github-oauth-creds
      namespace: omni
    spec:
      refreshInterval: 1h
      secretStoreRef:
        name: infisical-secret-store
        kind: ClusterSecretStore
      target:
        name: github-oauth-creds
        creationPolicy: Owner
      data:
        - secretKey: clientID
          remoteRef:
            key: /omni/github/OMNI_GITHUB_OIDC_CLIENT_ID
        - secretKey: clientSecret
          remoteRef:
            key: /omni/github/OMNI_GITHUB_OIDC_CLIENT_SECRET
  - |
    apiVersion: external-secrets.io/v1
    kind: ExternalSecret
    metadata:
      name: etcd-gpg-asc-key
      namespace: omni
    spec:
      refreshInterval: 1h
      secretStoreRef:
        name: infisical-secret-store
        kind: ClusterSecretStore
      target:
        name: etcd-gpg-asc-key
        creationPolicy: Owner
      data:
        - secretKey: omni.asc
          remoteRef:
            key: /omni/etcd/OMNI_GPG_ASC_KEY
